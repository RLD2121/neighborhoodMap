<!DOCTYPE html>
<html lang="en">>

<head>
    <meta charset="UTF-8">
    <title>Neighborhood Map</title>
    <link rel="stylesheet" href="css/style.css">
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBf4cjYevE1a5unQObLqDdZwLn-BGcD2g&v=3&callback=initMap">
    </script>
    <script src="js/lib/jquery.min.js"></script>
    <script src="js/lib/knockout-3.2.0.js"></script>
</head>

<body>
    <header>
        <h1>Top Mex Food</h1>
    </header>
    <div id="map"></div>
    <script>
        var map;

        var storesMarkers = [];
        var stores = [{
                title: 'Tudy\'s Taqueria',
                location: {
                    lat: 33.877217,
                    lng: -117.581081
                }
            },
            {
                title: 'La Mazorca',
                location: {
                    lat: 33.876637,
                    lng: -117.522898
                }
            },
            {
                title: 'Sombrero\'s Mexican Food',
                location: {
                    lat: 33.84312,
                    lng: -117.533418
                }
            },
            {
                title: 'Taco Stop',
                location: {
                    lat: 33.884796,
                    lng: -117.515437
                }
            },
            {
                title: 'Burger Basket',
                location: {
                    lat: 33.876894,
                    lng: -117.582397
                }
            },
            {
                title: 'Super Taco',
                location: {
                    lat: 33.876841,
                    lng: -117.567868
                }
            },
            {
                title: 'Alamilla\'s Mexican Food',
                location: {
                    lat: 33.894601,
                    lng: -117.562968
                }
            },
            {
                title: 'Santana\'s Mexican Food',
                location: {
                    lat: 33.867562,
                    lng: -117.544551
                }
            }
        ];
        
        function initMap() {

            //List of stores

            // Constructor creates a new map - only center and zoom are required.
            map = new google.maps.Map(document.getElementById('map'), {
                center: {
                    lat: 33.875119,
                    lng: -117.566671
                },
                zoom: 14
            });

            //stores length
            var storesLength = stores.length;
            for (var i = 0; i < storesLength; i++) {

                var position = stores[i].location;
                var name = stores[i].title;

                //marker creation for each store
                var marker = new google.maps.Marker({
                    position: position,
                    map: map,
                    title: name,
                    animation: google.maps.Animation.DROP
                })

                //push each marker to 
                storesMarkers.push(marker);

                var infoWindow = new google.maps.InfoWindow();
                
                //Attach event listener to each marker 
                (function(marker, name) {

                    google.maps.event.addListener(marker, "click", function(e) {
                        infoWindow.setContent('<div>'+name+'</div>');
                        infoWindow.open(map, marker);
                    });
                })(marker, name);
            }
        }
        
        
        //Foursquare IDs
        var clientID = 'PRWKLHKQ0KYRZ2W34ACVYLSEO3RW2RORPECMNDHQJABFSSEU';
        var clientSecret = 'D5Q0URJ4JXUJAMTNBBYIW0IUY2ARC352DWNNNWO1OCMQOWO5';        
        var apiURL = 'https://api.foursquare.com/v2/venues/';
        var foursquareVersion = '20170603';
        var venueID = '4b833fe2f964a52023ff30e3';

        var foursquareURL = apiURL + venueID + '?client_id=' + clientID +  '&client_secret=' + clientSecret +'&v=' + foursquareVersion;
        
    $.ajax({
      url: foursquareURL, 
      success: function(data) {
        console.log(data);
      } 
    });
        
    </script>

    
</body>

</html>